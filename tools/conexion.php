<?php/* Clase encargada de gestionar las conexiones a la base de datos */class DbC {    private $servidor = '';    private $usuario = '';    private $password = '';    private $base_datos = '';        public function getServidor($serv){        $this->servidor = $serv;    }    public function setServidor(){        return $this->servidor;    }        public function getUsuario($usu){        $this->usuario = $usu;    }    public function setUsuario(){        return $this->usuario;    }        public function getPassword($pass){        $this->password = $pass;    }    public function setPassword(){        return $this->password;    }        public function getBase_datos($bbdd){        $this->base_datos = $bbdd;    }    public function setBase_datos(){        return $this->base_datos;    }            //    private $servidor = 'qqf261.qualidad.info';//    private $usuario = 'qqf261';//    private $password = 'C4nt1b3l3d1d';    private $link;    private $stmt;    private $array;    public function conectar(){        $this->link = @mysql_connect ($this->servidor,$this->usuario,$this->password);        @mysql_select_db ( $this->base_datos, $this->link );        @mysql_query ( "SET NAMES 'utf8'" );    }    /* Método para ejecutar una sentencia sql */    public function ejecutar($sql) {            try {            	$this->stmt = mysql_query ( $sql, $this->link );            //        $this->stmt = @mysql_query ( $sql, $this->link ) or logger('error','conexion.php-' ,"Usuario: ".$_SESSION['strUsuario'].', Empresa: '.$_SESSION['base'].', SesionID: '.  session_id(). ' -Error MySQL= '.  mysql_errno($this->link).': '. mysql_error($this->link));                    return $this->stmt;            } catch ( Exception $e ) {                    // die("Metodo query: Error al ejecutar la sentencia SQL");                    return false;            }    }    /* Método para obtener una fila de resultados de la sentencia sql */    public function obtener_fila($stmt, $fila) {            try {                    if ($fila == 0) {                            $this->array = mysql_fetch_array ( $stmt );                    } else {                            mysql_data_seek ( $stmt, $fila );                            $this->array = mysql_fetch_array ( $stmt );                    }                    return $this->array;            } catch ( Exception $e ) {                    // die("Metodo query: Error al ejecutar la sentencia SQL");                    return false;            }    }    // Devuelve el último id del insert introducido    public function lastID() {            try {                    return mysql_insert_id ( $this->link );            } catch ( Exception $e ) {                    // die("Metodo query: Error al ejecutar la sentencia SQL");                    return false;            }    }    public function desconectar(){        mysql_close($this->link);    }        public function listar($stmt){        $resultado = '';        if($stmt){            while($row = mysql_fetch_array($stmt)){                foreach($row as $propiedad => $valor){                    if(!is_numeric($propiedad)){                        $resultado[] = $valor;                    }                }            }        }else{            //si ha fallado la consulta DEVOLVEMOS false            return false;        }                return $resultado;    }}?>